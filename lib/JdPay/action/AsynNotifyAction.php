<?php
namespace com\jdjr\pay\demo\action;
use com\jdjr\pay\demo\common\XMLUtil;
use com\jdjr\pay\demo\common\ConfigUtil;
include '../common/ConfigUtil.php';
include '../common/XMLUtil.php';
class AsynNotifyAction{
	public function execute(){
		//第一行数据失效，使用第二行数据测试，desKey修改使用ta4E/aspLA3lgFGKmNDNRYU92RkZ4w35，其他接口还使用原配置
		/*
		$xml = "<?xml version=\"1.0\" encoding=\"UTF-8\" ?><jdpay> <version>V2.0</version> <merchant>22294531</merchant> <result> <code>000000</code> <desc>success</desc> </result> <encrypt>NWI4MTBiNWNlMmRkZDdlYThjNjc0YmY1ZWJlY2QyODU0YTc5NmQ3ZWQxMWU1NzE3MWQ0OTUwOGI5NzllYmE4ZjM1YzRiZjlmYWE1M2ZiYjVmYzBmYTgyMDYyM2Q0YjM0NGM1ODFkZDhlYTA2Mjk0ZDE5ZDBlZDk5NTc3MmE4Nzk4OTFlYjIwZDgzMTc4MDU3NGVkZTFjNDY0MDMzNzNjZjc2OWZiMDQ0YjVhZGNhYmRhMGZmYTkyNzRhZDNhM2IxOGY5ZjZhYjBmYjhmZmI3Yzg0OTA3YzM0OGJmZTYwZTIzNzM3YjVmYzMzNmNkYTE0MjM2OWIwZDM5MjI2YWM5YmY3ZmZjZDBkNWJmM2ZkYWY4YTU3OWU4MDE3ZjQ5YmQ0ZWIyMDA0NTFmODZkNmViMDBiMDE2YTU3NTNjMzJjNDIzNWI5ZDkyYzQ3OTU4OTc2YzBiMDdmNWQ0MzIyZTEyZjMyM2VjY2U2NTYxNWRiNTMzNWI5ZDkyYzQ3OTU4OTc2NmIwM2QyZTU1ODJlNDNjM2M1NjA2YmQ5ZDc3MTRkMmNjN2ZiMDM3Yzg5ZDk1ODFkZGRiMmZhYTc4MDkyZmEwY2RlMzQwYzgzZDg5MTY0ZTZjODc4YjNmNTFmMTNhMjE0MzM1ZGM4YjI5MzhjNGQ1ZTU0YjkwMDJlMWI5ODg3MTk3MjM4MjI3ZmMwMjUzMThkZGIyMGM5Njg2Yjc5Y2QwNDcwNjI1YTc3ZWQ1ZTEyMzU2NTI2ZjljNTQ2NmQ5Yzc3YjRjMzZkOGI0NGYxYzllMzViMGYyNmJiMzA1ZjM3MDNhMjg5ODUyZTU0YWUzNTVlZjE0M2Y4OTY1ZjU3Y2UyM2U4ODU5MGRhODcwMDg0MDRjY2NiNmZlYTYzYzkwOTEyOTMzNDc3YzZiNzdiY2UwMjBlMzU5MzEyN2FiYWU4NzMxMjgyYTQwN2I3YTVjMjJlZDM2YmQ3NWE1N2VjNTQxNWI3MDYwMTk4ZTRlNmNlN2RjMWM2NjE1YTAzNWU5MmJkYTFkMzFiNTYwMTQwYTQ0YzZjMDQzYzE2YWYzMmQ4MzZmNGQyNDcwZDE0ZWRjMmQxYjgxMzhhNjA5M2ZlNDkxYTQyMzE5YzBlNTA0MTdkYTg2ZGQ2NDQwODBmMjM4ZGI2YzIzMjNhOTE0M2VmMjZiZjczN2M5NWQwODYxMWY2OGE5MDQ0ZDZmNzE0NmIxZjQwZDdmZDMxOTQ2ZDM3YjIwNDJiODUzZGM0NTk0MzM5YzJkN2M2NDdiNGM4MzQ4MTRjZTIxZTlmYTYzNDYxNGMxMjlhZTE3NjE0ZDIzM2Q2MTQ4YzJiNWE3ZWVjMDU5MjFmNzJkNGNjNTU1NWZkNzVhN2U5Y2I1MDU1NjhlMWRlNjVhNzkyOGUxMThlODQyMGJkNzE2NjdmMDc3YmEyYTFkNmQyOTFiOGNjZTU2ZGMyYmE2MWZhZWYyNTI5ODFhMTk5OGQ5ZmY5YTkyZTM2ZDU0MDY2Y2E5NjI0N2I1MGE4MTliMDBkNGIzNmViZTJlY2JmYTcwODUzYTM5ZTcwMDVmYWEzNWY2MDFhMWM2MGQ1MzE4MmZjMjNlMmYwYzRmOGE2ZDc0OGFkMGQ0ODJlNTgxOTIxNmNmYTkwMDkwNDNhOWFkNzQ4YWQwZDQ4MmU1ODE5ZjE3OWUzMDc2NWRiNGY0YWQ5NWIzOTY3NzViNWIyYmU0ZWU1NzE3MGNiODNjOGFjZDZiZDU5NGE2Nzk2ZGMxMjgyMGU5OTY5OGUxN2M1ZGZkNzQ4YWQwZDQ4MmU1ODE5ZDEwOWUwOTRhMDA5MDQ4YzMwY2M1N2E0Y2FlZDEwOWRkNDRiODVjMzRiNjhkYTM3YmEwNDZlNmNlODU5M2NkYzhlODdhNzRmZGViNDUyODVhOWRmOGM4NmFjNTNjZTA4ODVmNDY4OTA5YTdjMjlmNTk1OGQ2ODU4ZDYxNWQwMzA5ZmNjOTlmNmU5ZTMwZTVkYjI3YmRlYTQ5NTMxYjEyOTIxZmI0ZmE2ZTk0ZGI2NDZmYzgzMWJlMGRkZWYxNDkzZTJiMWY2Y2Q0MGNjMDg5M2VlM2Y5MmQzZTM2YmVjYzM3NmVhMjc2ZGFiYTk1M2Q4NTMwYmE3OTJiNGI2NWQyNzNhNjg5Y2I5YWYzZjU3ZWNkNTI4ODVjOGJmZGVlZTMyYWNmM2U4OWVhY2I3ZWRjNDM3ZmI4YzQyMzhjZTRhYzk3YzA5ZTk1MDQyM2YyZDQ3YzQyZDNkNDUxYTI3MWVmMw==</encrypt></jdpay>";
		*/
		$xml ="<?xml version=\"1.0\" encoding=\"UTF-8\" ?><jdpay>  <version>V2.0</version>  <merchant>110148035005</merchant>  <result>    <code>000000</code>    <desc>success</desc>  </result>  <encrypt>M2JlZTE1NTZkMTdmOGYzN2ZkN2YyY2IwNTFkMTI0MzgwYTA5ZjAxM2ZhNWI5NmUyNjVmNzg5ZmIyY2E4OWJkMmM5N2VmYWVlMDViMzJhNWQwYWVhZDI4YTE5MjRhY2QzZjAyZmMxMjcyODVhNjM4ZWE3ZDkxNjk1N2VlYTVlMTQ0MzMzNWFlODg2MzAzOTE1ZDQyNDM3NzlmZmM2NzA1NjNmNTA2MGVjZjRmOWFlZjVkZDNkZjM2NjZlYTU4Mjk1NDZjOTUxMmJkOTI4NzM0MjBjMWUyMjU2Njg5ZjNmMjNhZjU4Njg2YWJjNDEwOWEyOGU2ZjZmMzkyZDIwNDM5ZjQxMTc0NzdiYjRmMjA3MWQxMjRlYTA0YmJlMWI1OTFjZGM5YWE1YTU5MDQ5MmQ0ZWE5NDdlNTNhNTBjZGZjNWQ2M2MyNWRlN2VhNzJhOWVlODg3ZmYzZmJjNzNlMWI1YzExYzk1MWRiNjhlY2QwOGFmZWZlYmEwNTk1NmU3MDI0NDEzY2E0NjdlNjkzNDViNWEzOTY4ZGM4M2Y0ZDk1ZGI4YWRiM2FlMjlmNGMyNDRjNjIwMTBmOWUxOTUwYjQ3ODg3OGQyYzAwZWUzY2U0ZGViMDMxZGE5YjlhMTZhNWRhMjdkNTRlMWQxNjExYjUwZGVkNzZkMGZmNWQ0YTg1ODFkN2NjNTEzODYyMGQ5OGYwZDlhODJmMTE4YWRlZTM1YzgwNDAxYTcwNzY1ZDNmY2ZkNTdjNGY4NzNhMzhhZTA4OWFmMDAxMTMyYWNmZjM0NTdhZDczYjhkOTJhNGIxMzMxNzQ3ZTMwYmQ4Njg2MGRkMDEwOGM0ZmNkMzU4M2I4YjI1NDdiMjU0OTdmZjNkMTYyZTU5MzFlODNkN2ZjZmZjYjhjYzUxNjY1NGMwMjA0MDk3YTNiNDM0YzFlNDdkZDU1ODZkN2ZlMTBkNWNkNWRmOGYyOWQ0NTk2MmMxMGYzYTE1MTJhNDM5M2M5YWI0ZmQ4MmYwYjFjMzRlNDJiMGJkNDY3YWFjMGU0OGI2YTJkMmUzZDA3ZWIxNmJmM2I5NWViNzk1MzEwZTBhNDUyZjdkYTMzMjhhNWVlZjJkN2M0MjUxZWRjY2ZmNDY2OTI1NjdlMGExMThkNjkyNGNkMGYzZjllYjEwZTAzYmMzMGZmMmQ0NDBjZGVkOWJkZGRjNjdkZmJlYjZjY2ExODk1Zjc3ZjQzNDZhMDdlNmM5M2ZlOWVjZTFkY2IyMDk2ODcwODhhMzM3ZTJhYTMzNWQyMjE4ZmIwZmUyNWYyYTFiYzc3MDgxNjZmYWM3ODJjOGQwYTc1NmQ2NmFmNDhmYjEzNTIwYzhmYjIxYjgzYmY4ZGRlYTI3MTA4YjAzZDA0OWJlYjUwZmQ1YTU5OTE0MzIwMWMxOTM4OTk4OWRjYjVmMmFkNWU4OGFmZGM2YmJlZmFjYjVhNDE1NGZmYjRmNWNjYmE3YWYwNzcxMDUxODU4NTM3YzdiNzhmYWUyNmE4ZDFjZmIzMjRiN2I4ZGZlNTE2NzBlZTUyMDA1Y2Y4Mjg4MzhkOTAwMDYxNGIyNTExZTZhNDM2Yzg1NmZhODY2YWE1YzFjY2E1Y2NkNjVkYmNiY2IzYTFiZmM4OWY1NGVlOWNjMzhmM2U3MThlYTFhMGYwMTJjNzAwMGU4MzlmZDdhOTc0MDdlY2FiODVkMGVhOTc2MDg4NWU4YjJlYjM2MTAzMmQ1ZDc4N2FhY2Q5NWQ1NmIxMjkzMGMwY2EyZDhkZmFiZmI2NWI0MDEyNmJmZDRjZGNlNDgyNjg5ZmMzNzJiOThmNzdjNzE5NWJjZTZkYTY2MzYxZjY1OTdmZTM0YjhhMDYzNDQwYmM2Y2MwZTYyZjM0NzEyYmJmZDhjN2MwZTM2Zjk0NDBiYzZjYzBlNjJmMzQ3NGFmNDY5YTg5MDFjYzA4MzVjYmUyYTMzMmI2YWEwYWJhN2Y4NjVjMjg2NzNiYzA0YjlmZGRjNTFlMDNmMDkzNjhiMmJkNTVjZmFhZDM4M2MzZjA1MTA2NGMzOWUzZTQwYzczNjRjNmE3NWI4OTNmZThmMTM5ZTRkMDE2YjJkMDVmNTdmZTg0YWI2OGZkMDYyNjlmZWRmYzYyYTg0YzM0YzgxNzRkYjI2ZGFlOGExYTlmN2JjNjIzNjUxNGI5MDhmZTQyYjM0ODE1MjRlYWIwMmIzOTNlOTk0OWZlYzFmZmE4YzBkNTU5MDQwMGRiNTE0ODI0ZjBhMWQyZDAxMWExM2M1ZDUxZDhiNzRhMTg4YWY=</encrypt></jdpay>";
		$resdata;
		$falg = XMLUtil::decryptResXml($xml, $resdata);
		var_dump(falg)."\n";
		var_dump($falg)."\n";
		if($falg){
			echo "验签成功";
			echo json_encode($resdata);
		}else{
			echo "验签失败";
		}
	}
}
error_reporting(0);
$m=new AsynNotifyAction();
$m->execute();
?>